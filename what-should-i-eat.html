<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>What Should I Eat? - Smart Meal Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 50%, #48dbfb 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .meal-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease-in-out;
        }
        
        .meal-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }
        
        .ingredient-tag {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 20px;
            padding: 0.5rem 1rem;
            margin: 0.25rem;
            display: inline-block;
            transition: all 0.2s ease;
        }
        
        .ingredient-tag:hover {
            transform: scale(1.05);
        }
        
        .ingredient-tag.available {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .ingredient-tag.missing {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .ingredient-tag.low {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .recipe-image {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 3rem;
        }
        
        .difficulty-easy { color: #10b981; }
        .difficulty-medium { color: #f59e0b; }
        .difficulty-hard { color: #ef4444; }
        
        .cooking-time {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .nutrition-badge {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 0.5rem;
            text-align: center;
        }
        
        .shopping-list-item {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            margin: 0.5rem 0;
            border-left: 4px solid #667eea;
            transition: all 0.2s ease;
        }
        
        .shopping-list-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .fridge-item {
            background: white;
            border-radius: 10px;
            padding: 1rem;
            margin: 0.5rem 0;
            border-left: 4px solid #10b981;
            transition: all 0.2s ease;
        }
        
        .fridge-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .quantity-badge {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .quantity-badge.low {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .quantity-badge.out {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 1rem;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            max-width: 300px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.warning {
            background: #f59e0b;
        }
        
        .notification.alert {
            background: #ef4444;
        }
        
        .hidden { display: none; }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .tab-button {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 10px;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .tab-button.active {
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            transform: scale(1.05);
        }
        
        .household-member {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            margin: 0.25rem;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="min-h-screen p-4">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <div class="meal-card p-8 rounded-xl mb-8 text-center">
                <h1 class="text-4xl font-bold text-gray-800 mb-2">What Should I Eat?</h1>
                <p class="text-gray-600 text-lg">Smart meal generator with household inventory tracking</p>
                <div class="flex justify-center items-center gap-4 mt-4">
                    <div class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-sm">
                        <span id="fridge-count">0</span> items in fridge
                    </div>
                    <div class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm">
                        <span id="recipe-count">0</span> recipes found
                    </div>
                    <div class="bg-purple-100 text-purple-800 px-4 py-2 rounded-full text-sm">
                        <span id="household-count">3</span> household members
                    </div>
                </div>
            </div>

            <!-- Household Members -->
            <div class="meal-card p-6 rounded-xl mb-6">
                <h2 class="text-xl font-bold text-gray-800 mb-4">üè† Household Members</h2>
                <div class="flex flex-wrap gap-2">
                    <span class="household-member">üë§ Minho (You)</span>
                    <span class="household-member">üë§ Sarah</span>
                    <span class="household-member">üë§ Mike</span>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="flex gap-4 mb-6">
                <button onclick="showTab('fridge')" class="tab-button active" id="fridge-tab">üì¶ Fridge Inventory</button>
                <button onclick="showTab('recipes')" class="tab-button" id="recipes-tab">üçΩÔ∏è Find Recipes</button>
                <button onclick="showTab('shopping')" class="tab-button" id="shopping-tab">üõí Shopping List</button>
            </div>

            <div class="flex flex-col lg:flex-row gap-6">
                <!-- Main Content -->
                <div class="flex-1">
                    <!-- Fridge Inventory Tab -->
                    <div id="fridge-tab-content">
                        <div class="meal-card p-6 rounded-xl mb-6">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4">What's in your fridge?</h2>
                            <div class="flex gap-2 mb-4">
                                <input
                                    type="text"
                                    placeholder="Add item (e.g., chicken, milk, tomatoes)"
                                    class="flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    id="fridge-input"
                                    onkeypress="handleFridgeKeyPress(event)"
                                />
                                <input
                                    type="number"
                                    placeholder="Qty"
                                    class="w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                                    id="quantity-input"
                                    min="1"
                                    value="1"
                                />
                                <button
                                    onclick="addToFridge()"
                                    class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition-colors"
                                >
                                    Add
                                </button>
                            </div>
                            <div id="fridge-items">
                                <!-- Fridge items will be displayed here -->
                            </div>
                        </div>
                    </div>

                    <!-- Recipes Tab -->
                    <div id="recipes-tab-content" class="hidden">
                        <div class="meal-card p-6 rounded-xl mb-6">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4">Recipes You Can Make</h2>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="recipes-grid">
                                <!-- Recipes will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Shopping List Tab -->
                    <div id="shopping-tab-content" class="hidden">
                        <div class="meal-card p-6 rounded-xl mb-6">
                            <h2 class="text-2xl font-bold text-gray-800 mb-4">Shopping List</h2>
                            <div id="shopping-list">
                                <p class="text-gray-500 text-center py-8">Add items to see what you need to buy</p>
                            </div>
                            <div class="mt-4 hidden" id="shopping-actions">
                                <button
                                    onclick="clearShoppingList()"
                                    class="w-full bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg transition-colors mb-2"
                                >
                                    Clear List
                                </button>
                                <button
                                    onclick="exportShoppingList()"
                                    class="w-full bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg transition-colors"
                                >
                                    Export to Phone
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <div class="lg:w-96">
                    <!-- Quick Add Common Items -->
                    <div class="meal-card p-6 rounded-xl mb-6">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Quick Add Common Items</h3>
                        <div class="grid grid-cols-2 gap-2">
                            <button onclick="quickAddToFridge('chicken', 2)" class="bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm transition-colors">Chicken (2)</button>
                            <button onclick="quickAddToFridge('rice', 1)" class="bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm transition-colors">Rice (1)</button>
                            <button onclick="quickAddToFridge('eggs', 12)" class="bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm transition-colors">Eggs (12)</button>
                            <button onclick="quickAddToFridge('tomatoes', 4)" class="bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm transition-colors">Tomatoes (4)</button>
                            <button onclick="quickAddToFridge('onions', 3)" class="bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm transition-colors">Onions (3)</button>
                            <button onclick="quickAddToFridge('garlic', 5)" class="bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm transition-colors">Garlic (5)</button>
                            <button onclick="quickAddToFridge('pasta', 2)" class="bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm transition-colors">Pasta (2)</button>
                            <button onclick="quickAddToFridge('cheese', 1)" class="bg-gray-100 hover:bg-gray-200 p-2 rounded text-sm transition-colors">Cheese (1)</button>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="meal-card p-6 rounded-xl">
                        <h3 class="text-xl font-bold text-gray-800 mb-4">Recent Activity</h3>
                        <div id="activity-feed" class="space-y-3">
                            <div class="text-sm text-gray-600">
                                <div class="font-medium">üë§ Sarah used 2 eggs</div>
                                <div class="text-xs">2 minutes ago</div>
                            </div>
                            <div class="text-sm text-gray-600">
                                <div class="font-medium">üë§ Mike added milk</div>
                                <div class="text-xs">15 minutes ago</div>
                            </div>
                            <div class="text-sm text-gray-600">
                                <div class="font-medium">üë§ You used 1 onion</div>
                                <div class="text-xs">1 hour ago</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recipe Modal -->
    <div id="recipe-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="meal-card p-6 rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-4">
                    <h3 class="text-xl font-bold text-gray-800" id="modal-title">Recipe Details</h3>
                    <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600">‚úï</button>
                </div>
                <div id="modal-content">
                    <!-- Modal content will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications -->
    <div id="notification" class="notification">
        <div class="flex items-center gap-2">
            <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <span id="notification-text">Item added to fridge!</span>
        </div>
    </div>

    <script>
        // Sample recipe database
        const recipes = [
            {
                id: 1,
                name: "Chicken Stir Fry",
                description: "Quick and healthy chicken stir fry with vegetables",
                ingredients: ["chicken", "rice", "onions", "garlic", "soy sauce", "vegetables"],
                instructions: [
                    "Cut chicken into bite-sized pieces",
                    "Cook rice according to package instructions",
                    "Stir fry chicken until golden brown",
                    "Add vegetables and stir fry for 3-4 minutes",
                    "Add soy sauce and serve over rice"
                ],
                cookingTime: 25,
                difficulty: "easy",
                servings: 4,
                nutrition: {
                    calories: 350,
                    protein: "25g",
                    carbs: "45g",
                    fat: "8g"
                },
                image: "üç≥"
            },
            {
                id: 2,
                name: "Pasta Carbonara",
                description: "Classic Italian pasta with eggs, cheese, and bacon",
                ingredients: ["pasta", "eggs", "cheese", "bacon", "garlic", "black pepper"],
                instructions: [
                    "Cook pasta in salted water until al dente",
                    "Cook bacon until crispy",
                    "Beat eggs with cheese and black pepper",
                    "Combine hot pasta with egg mixture",
                    "Add bacon and serve immediately"
                ],
                cookingTime: 20,
                difficulty: "medium",
                servings: 2,
                nutrition: {
                    calories: 450,
                    protein: "18g",
                    carbs: "55g",
                    fat: "22g"
                },
                image: "üçù"
            },
            {
                id: 3,
                name: "Vegetable Omelette",
                description: "Fluffy omelette filled with fresh vegetables",
                ingredients: ["eggs", "tomatoes", "onions", "cheese", "milk"],
                instructions: [
                    "Beat eggs with milk and season with salt and pepper",
                    "Saut√© vegetables until tender",
                    "Pour egg mixture into pan",
                    "Add cheese and vegetables to one half",
                    "Fold and cook until set"
                ],
                cookingTime: 15,
                difficulty: "easy",
                servings: 1,
                nutrition: {
                    calories: 280,
                    protein: "20g",
                    carbs: "8g",
                    fat: "18g"
                },
                image: "üç≥"
            },
            {
                id: 4,
                name: "Rice and Beans",
                description: "Simple and nutritious rice and beans dish",
                ingredients: ["rice", "beans", "onions", "garlic", "tomatoes", "spices"],
                instructions: [
                    "Cook rice according to package instructions",
                    "Saut√© onions and garlic until fragrant",
                    "Add beans and tomatoes",
                    "Season with spices and simmer",
                    "Serve beans over rice"
                ],
                cookingTime: 30,
                difficulty: "easy",
                servings: 4,
                nutrition: {
                    calories: 320,
                    protein: "12g",
                    carbs: "60g",
                    fat: "2g"
                },
                image: "üçö"
            },
            {
                id: 5,
                name: "Chicken Pasta",
                description: "Creamy chicken pasta with vegetables",
                ingredients: ["chicken", "pasta", "cream", "cheese", "garlic", "vegetables"],
                instructions: [
                    "Cook pasta in salted water",
                    "Saut√© chicken until cooked through",
                    "Add cream and cheese to make sauce",
                    "Add vegetables and cook until tender",
                    "Combine with pasta and serve"
                ],
                cookingTime: 35,
                difficulty: "medium",
                servings: 4,
                nutrition: {
                    calories: 520,
                    protein: "28g",
                    carbs: "45g",
                    fat: "25g"
                },
                image: "üçù"
            },
            {
                id: 6,
                name: "Tomato Soup",
                description: "Homemade tomato soup with grilled cheese",
                ingredients: ["tomatoes", "onions", "garlic", "cream", "bread", "cheese"],
                instructions: [
                    "Saut√© onions and garlic until soft",
                    "Add tomatoes and simmer for 20 minutes",
                    "Blend until smooth",
                    "Add cream and season to taste",
                    "Serve with grilled cheese sandwich"
                ],
                cookingTime: 40,
                difficulty: "easy",
                servings: 4,
                nutrition: {
                    calories: 280,
                    protein: "8g",
                    carbs: "25g",
                    fat: "16g"
                },
                image: "üçÖ"
            }
        ];

        let fridgeInventory = [
            { name: "chicken", quantity: 2, addedBy: "Minho", addedAt: "2025-01-18" },
            { name: "eggs", quantity: 8, addedBy: "Sarah", addedAt: "2025-01-18" },
            { name: "milk", quantity: 1, addedBy: "Mike", addedAt: "2025-01-18" },
            { name: "tomatoes", quantity: 3, addedBy: "Minho", addedAt: "2025-01-18" }
        ];
        
        let shoppingList = [];
        let currentTab = 'fridge';

        // Initialize the application
        function init() {
            renderFridgeInventory();
            updateCounts();
            generateMeals();
        }

        // Show tab
        function showTab(tabName) {
            // Hide all tab contents
            document.getElementById('fridge-tab-content').classList.add('hidden');
            document.getElementById('recipes-tab-content').classList.add('hidden');
            document.getElementById('shopping-tab-content').classList.add('hidden');
            
            // Remove active class from all tabs
            document.getElementById('fridge-tab').classList.remove('active');
            document.getElementById('recipes-tab').classList.remove('active');
            document.getElementById('shopping-tab').classList.remove('active');
            
            // Show selected tab content
            document.getElementById(tabName + '-tab-content').classList.remove('hidden');
            document.getElementById(tabName + '-tab').classList.add('active');
            
            currentTab = tabName;
        }

        // Add to fridge
        function addToFridge() {
            const input = document.getElementById('fridge-input');
            const quantityInput = document.getElementById('quantity-input');
            const item = input.value.trim().toLowerCase();
            const quantity = parseInt(quantityInput.value) || 1;
            
            if (item) {
                const existingItem = fridgeInventory.find(inv => inv.name === item);
                if (existingItem) {
                    existingItem.quantity += quantity;
                    showNotification(`Added ${quantity} more ${item} to fridge`, 'success');
                } else {
                    fridgeInventory.push({
                        name: item,
                        quantity: quantity,
                        addedBy: "Minho",
                        addedAt: new Date().toISOString().split('T')[0]
                    });
                    showNotification(`Added ${quantity} ${item} to fridge`, 'success');
                }
                
                input.value = '';
                quantityInput.value = 1;
                renderFridgeInventory();
                updateCounts();
                generateMeals();
            }
        }

        // Quick add to fridge
        function quickAddToFridge(item, quantity) {
            const existingItem = fridgeInventory.find(inv => inv.name === item);
            if (existingItem) {
                existingItem.quantity += quantity;
                showNotification(`Added ${quantity} more ${item} to fridge`, 'success');
            } else {
                fridgeInventory.push({
                    name: item,
                    quantity: quantity,
                    addedBy: "Minho",
                    addedAt: new Date().toISOString().split('T')[0]
                });
                showNotification(`Added ${quantity} ${item} to fridge`, 'success');
            }
            
            renderFridgeInventory();
            updateCounts();
            generateMeals();
        }

        // Handle fridge key press
        function handleFridgeKeyPress(event) {
            if (event.key === 'Enter') {
                addToFridge();
            }
        }

        // Use ingredient
        function useIngredient(itemName, amount = 1) {
            const item = fridgeInventory.find(inv => inv.name === itemName);
            if (item && item.quantity >= amount) {
                item.quantity -= amount;
                
                if (item.quantity === 0) {
                    fridgeInventory = fridgeInventory.filter(inv => inv.name !== itemName);
                    showNotification(`${itemName} is now out of stock!`, 'alert');
                } else if (item.quantity <= 2) {
                    showNotification(`${itemName} is running low (${item.quantity} left)`, 'warning');
                } else {
                    showNotification(`Used ${amount} ${itemName}`, 'success');
                }
                
                renderFridgeInventory();
                updateCounts();
                generateMeals();
            }
        }

        // Render fridge inventory
        function renderFridgeInventory() {
            const container = document.getElementById('fridge-items');
            if (fridgeInventory.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Your fridge is empty! Add some items to get started.</p>';
                return;
            }
            
            container.innerHTML = fridgeInventory.map(item => {
                const quantityClass = item.quantity === 0 ? 'out' : item.quantity <= 2 ? 'low' : '';
                return `
                    <div class="fridge-item">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <span class="font-medium capitalize">${item.name}</span>
                                <span class="quantity-badge ${quantityClass}">${item.quantity}</span>
                            </div>
                            <div class="flex items-center gap-2">
                                <button
                                    onclick="useIngredient('${item.name}', 1)"
                                    class="bg-red-500 hover:bg-red-600 text-white px-3 py-1 rounded text-sm transition-colors"
                                >
                                    Use 1
                                </button>
                                <button
                                    onclick="useIngredient('${item.name}', 2)"
                                    class="bg-orange-500 hover:bg-orange-600 text-white px-3 py-1 rounded text-sm transition-colors"
                                >
                                    Use 2
                                </button>
                                <button
                                    onclick="removeFromFridge('${item.name}')"
                                    class="text-red-500 hover:text-red-700"
                                >
                                    ‚úï
                                </button>
                            </div>
                        </div>
                        <div class="text-xs text-gray-500 mt-1">
                            Added by ${item.addedBy} on ${item.addedAt}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Remove from fridge
        function removeFromFridge(itemName) {
            fridgeInventory = fridgeInventory.filter(item => item.name !== itemName);
            renderFridgeInventory();
            updateCounts();
            generateMeals();
        }

        // Update counts
        function updateCounts() {
            document.getElementById('fridge-count').textContent = fridgeInventory.length;
            document.getElementById('recipe-count').textContent = '0';
        }

        // Generate meals
        function generateMeals() {
            const availableIngredients = fridgeInventory.map(item => item.name);
            
            const matchingRecipes = recipes.filter(recipe => {
                const requiredIngredients = recipe.ingredients;
                const availableCount = requiredIngredients.filter(ingredient => 
                    availableIngredients.includes(ingredient)
                ).length;
                return availableCount >= Math.ceil(requiredIngredients.length * 0.6);
            });

            renderRecipes(matchingRecipes);
            generateShoppingList(matchingRecipes);
            
            document.getElementById('recipe-count').textContent = matchingRecipes.length;
        }

        // Render recipes
        function renderRecipes(recipes) {
            const container = document.getElementById('recipes-grid');
            const availableIngredients = fridgeInventory.map(item => item.name);
            
            container.innerHTML = recipes.map(recipe => {
                const availableCount = recipe.ingredients.filter(ingredient => 
                    availableIngredients.includes(ingredient)
                ).length;
                const matchPercentage = Math.round((availableCount / recipe.ingredients.length) * 100);
                
                return `
                    <div class="meal-card rounded-xl overflow-hidden fade-in">
                        <div class="recipe-image">
                            ${recipe.image}
                        </div>
                        <div class="p-4">
                            <h3 class="text-lg font-semibold text-gray-800 mb-2">${recipe.name}</h3>
                            <p class="text-gray-600 text-sm mb-3">${recipe.description}</p>
                            <div class="flex items-center justify-between mb-3">
                                <span class="cooking-time">${recipe.cookingTime} min</span>
                                <span class="difficulty-${recipe.difficulty} font-medium">${recipe.difficulty}</span>
                            </div>
                            <div class="mb-3">
                                <div class="text-sm text-gray-600 mb-1">Ingredient Match: ${matchPercentage}%</div>
                                <div class="w-full bg-gray-200 rounded-full h-2">
                                    <div class="bg-green-500 h-2 rounded-full" style="width: ${matchPercentage}%"></div>
                                </div>
                            </div>
                            <div class="flex gap-2 mb-3">
                                ${recipe.ingredients.map(ingredient => `
                                    <span class="ingredient-tag ${availableIngredients.includes(ingredient) ? 'available' : 'missing'}">
                                        ${ingredient}
                                    </span>
                                `).join('')}
                            </div>
                            <button
                                onclick="showRecipeDetails(${recipe.id})"
                                class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors"
                            >
                                View Recipe
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Generate shopping list
        function generateShoppingList(recipes) {
            shoppingList = [];
            const availableIngredients = fridgeInventory.map(item => item.name);
            const allRequiredIngredients = new Set();
            
            recipes.forEach(recipe => {
                recipe.ingredients.forEach(ingredient => {
                    if (!availableIngredients.includes(ingredient)) {
                        allRequiredIngredients.add(ingredient);
                    }
                });
            });

            shoppingList = Array.from(allRequiredIngredients);
            renderShoppingList();
        }

        // Render shopping list
        function renderShoppingList() {
            const container = document.getElementById('shopping-list');
            const actions = document.getElementById('shopping-actions');
            
            if (shoppingList.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-8">Add items to see what you need to buy</p>';
                actions.classList.add('hidden');
            } else {
                container.innerHTML = shoppingList.map(item => `
                    <div class="shopping-list-item">
                        <div class="flex items-center justify-between">
                            <span class="font-medium">${item}</span>
                            <button onclick="removeFromShoppingList('${item}')" class="text-red-500 hover:text-red-700">‚úï</button>
                        </div>
                    </div>
                `).join('');
                actions.classList.remove('hidden');
            }
        }

        // Remove from shopping list
        function removeFromShoppingList(item) {
            shoppingList = shoppingList.filter(ingredient => ingredient !== item);
            renderShoppingList();
        }

        // Clear shopping list
        function clearShoppingList() {
            shoppingList = [];
            renderShoppingList();
        }

        // Export shopping list
        function exportShoppingList() {
            const list = shoppingList.join('\n');
            const blob = new Blob([list], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'shopping-list.txt';
            a.click();
            URL.revokeObjectURL(url);
        }

        // Show recipe details
        function showRecipeDetails(recipeId) {
            const recipe = recipes.find(r => r.id === recipeId);
            if (!recipe) return;

            const availableIngredients = fridgeInventory.map(item => item.name);

            document.getElementById('modal-title').textContent = recipe.name;
            document.getElementById('modal-content').innerHTML = `
                <div class="space-y-4">
                    <div class="text-center">
                        <div class="text-6xl mb-4">${recipe.image}</div>
                        <p class="text-gray-600">${recipe.description}</p>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div class="nutrition-badge">
                            <div class="text-sm text-gray-600">Calories</div>
                            <div class="font-bold">${recipe.nutrition.calories}</div>
                        </div>
                        <div class="nutrition-badge">
                            <div class="text-sm text-gray-600">Protein</div>
                            <div class="font-bold">${recipe.nutrition.protein}</div>
                        </div>
                        <div class="nutrition-badge">
                            <div class="text-sm text-gray-600">Carbs</div>
                            <div class="font-bold">${recipe.nutrition.carbs}</div>
                        </div>
                        <div class="nutrition-badge">
                            <div class="text-sm text-gray-600">Fat</div>
                            <div class="font-bold">${recipe.nutrition.fat}</div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">Ingredients:</h4>
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${recipe.ingredients.map(ingredient => `
                                <span class="ingredient-tag ${availableIngredients.includes(ingredient) ? 'available' : 'missing'}">
                                    ${ingredient}
                                </span>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-semibold text-gray-800 mb-2">Instructions:</h4>
                        <ol class="list-decimal list-inside space-y-2 text-gray-700">
                            ${recipe.instructions.map(instruction => `
                                <li>${instruction}</li>
                            `).join('')}
                        </ol>
                    </div>
                    
                    <div class="flex gap-2">
                        <button
                            onclick="useRecipeIngredients(${recipe.id})"
                            class="flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg transition-colors"
                        >
                            Use Ingredients
                        </button>
                        <button
                            onclick="addMissingToShoppingList(${recipe.id})"
                            class="flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg transition-colors"
                        >
                            Add Missing to Shopping List
                        </button>
                        <button
                            onclick="closeModal()"
                            class="flex-1 bg-gray-600 hover:bg-gray-700 text-white py-2 rounded-lg transition-colors"
                        >
                            Close
                        </button>
                    </div>
                </div>
            `;
            document.getElementById('recipe-modal').classList.remove('hidden');
        }

        // Use recipe ingredients
        function useRecipeIngredients(recipeId) {
            const recipe = recipes.find(r => r.id === recipeId);
            if (!recipe) return;

            recipe.ingredients.forEach(ingredient => {
                const fridgeItem = fridgeInventory.find(item => item.name === ingredient);
                if (fridgeItem && fridgeItem.quantity > 0) {
                    useIngredient(ingredient, 1);
                }
            });

            closeModal();
        }

        // Add missing ingredients to shopping list
        function addMissingToShoppingList(recipeId) {
            const recipe = recipes.find(r => r.id === recipeId);
            if (!recipe) return;

            const availableIngredients = fridgeInventory.map(item => item.name);

            recipe.ingredients.forEach(ingredient => {
                if (!availableIngredients.includes(ingredient) && !shoppingList.includes(ingredient)) {
                    shoppingList.push(ingredient);
                }
            });

            renderShoppingList();
            closeModal();
        }

        // Close modal
        function closeModal() {
            document.getElementById('recipe-modal').classList.add('hidden');
        }

        // Show notification
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            notification.className = `notification ${type}`;
            notificationText.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html> 
</html> 